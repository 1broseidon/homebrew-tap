# This file was generated by GoReleaser. DO NOT EDIT.
cask "promptext" do
  postflight do
    # Remove quarantine attribute
    system_command "/usr/bin/xattr",
                   args: ["-d", "com.apple.quarantine", "#{staged_path}/promptext"],
                   sudo: false

    # Create prx symlink
    bin_path = "#{HOMEBREW_PREFIX}/bin"
    prx_link = "#{bin_path}/prx"
    promptext_bin = "#{bin_path}/promptext"

    if File.exist?(promptext_bin) && !File.exist?(prx_link)
      File.symlink(promptext_bin, prx_link)
    end
  end

  uninstall_postflight do
    # Remove prx symlink during uninstall
    prx_link = "#{HOMEBREW_PREFIX}/bin/prx"
    File.delete(prx_link) if File.symlink?(prx_link)
  end

  name "promptext"
  desc "Smart code context extractor for AI assistants"
  homepage "https://github.com/1broseidon/promptext"
  version "0.6.1"

  livecheck do
    skip "Auto-generated on release."
  end

  binary "promptext"

  on_macos do
    on_intel do
      url "https://github.com/1broseidon/promptext/releases/download/v#{version}/promptext_Darwin_x86_64.tar.gz"
      sha256 "3cb1cf86bf985fcea4c8bc50862f1a2a4fa77214a47e9258043a4c6d1449e7c9"
    end
    on_arm do
      url "https://github.com/1broseidon/promptext/releases/download/v#{version}/promptext_Darwin_arm64.tar.gz"
      sha256 "43121fe994559c8b0b38dd13086bf82ff1bef23458d7a390dc592424f258ef38"
    end
  end

  on_linux do
    on_intel do
      url "https://github.com/1broseidon/promptext/releases/download/v#{version}/promptext_Linux_x86_64.tar.gz"
      sha256 "ff7f0e38286839922e96784aa1bb3a62f0f6b9c6e1e0c52e96df350c67d4cfa1"
    end
    on_arm do
      url "https://github.com/1broseidon/promptext/releases/download/v#{version}/promptext_Linux_arm64.tar.gz"
      sha256 "cd3d70893c5b0330f0e3a2f6e6adcab7d816df840a4db724356fc06daddb6bea"
    end
  end

  # No zap stanza required
end
